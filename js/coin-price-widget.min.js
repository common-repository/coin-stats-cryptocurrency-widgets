"use strict";(function(){var currencies={};var config={attributes:true};function getData(coinId,type,callback){return fetch("https://api.coin-stats.com/v2/widget/coin/"+coinId+"?type="+type).then(function(res){return res.json()}).then(function(res){return callback(res)})}function getCurrencies(callback){return fetch("https://api.coin-stats.com/v3/currencies").then(function(resFiats){return resFiats.json()}).then(function(resFiats){callback(resFiats)})}function createWidget(placeHolder){var coinId=placeHolder.getAttribute("coin-id");var type=placeHolder.getAttribute("type");getData(coinId,type,function(data){var localeAtt=placeHolder.getAttribute("locale");var currency=placeHolder.getAttribute("currency").toUpperCase();var rankBackground=placeHolder.getAttribute("rank-background");var background=placeHolder.getAttribute("background");var statusUp=placeHolder.getAttribute("status-up-color");var statusDown=placeHolder.getAttribute("status-down-color");var rankText=placeHolder.getAttribute("rank-text-color");var borderColor=placeHolder.getAttribute("border-color");var text=placeHolder.getAttribute("text-color");var width=placeHolder.getAttribute("width");var height=placeHolder.getAttribute("height");var disableCredits=placeHolder.getAttribute("disable-credits");var font=placeHolder.getAttribute("font")||"Roboto, Arial, Helvetica";var colors={statusUp:statusUp,statusDown:statusDown,text:text,background:background,rankBackColor:rankBackground,rankColor:rankText,border:borderColor};var tempContainer=document.createElement("div");var widgetContainer=document.createElement("div");var widgetTable=document.createElement("div");widgetTable.style.cssText="\n      background-color: "+colors.background+";\n      border-radius: 29px;\n      border: solid 1px "+colors.border+";\n      padding: 24px 34px;\n      color: "+colors.text+";\n      max-width: "+(Number(width)>320?width+"px":"320px")+";\n      cursor: pointer;\n      height: "+(Number(height)?Number(height)+"px":"auto")+";\n      display: flex;\n      justify-content: center;\n      flex-direction: column;\n    ";widgetContainer.style.cssText="\n        max-width: "+(Number(width)>320?width+"px":"320px")+";\n        font-family: "+font+", sans-serif;\n      ";widgetTable.appendChild(firstRowNode(data.ic,data.n,data.s));widgetTable.appendChild(secondRowNode(data,colors,localeAtt,currency));if(type==="large"){widgetTable.appendChild(thirdRowNode(data,colors,localeAtt))}widgetTable.setAttribute("onclick","window.open('https://coinstats.app/en/coins/"+coinId+"');");widgetContainer.appendChild(widgetTable);if(!disableCredits){widgetContainer.appendChild(createCredits(colors.text))}tempContainer.appendChild(widgetContainer);placeHolder.innerHTML=tempContainer.innerHTML;resetStyles(placeHolder)})}function firstRowNode(iconSrc,name,symbol){var tableRowNode=document.createElement("div");var logoNode=createLogoNode(iconSrc);var nameNode=createNameNode(name,symbol);tableRowNode.style.cssText="\n      display: flex;\n      margin-bottom: 15px;\n    ";tableRowNode.appendChild(logoNode);tableRowNode.appendChild(nameNode);return tableRowNode}function secondRowNode(data,colors,localeAtt,currency){var tableRowNode=document.createElement("div");var rankNode=createRankNode(data.r,colors);var priceTableDataNode=document.createElement("span");var priceTableDataTextNode=document.createTextNode(formatPrice(data.pu,localeAtt,currency));var percentNode=createPercentNode(data.p24,true,colors);priceTableDataNode.appendChild(priceTableDataTextNode);priceTableDataNode.style.cssText="\n    font-size: 34px;\n    font-weight: 300;    \n  ";tableRowNode.style.cssText="\n    display: flex;\n    align-items: center;\n  ";tableRowNode.appendChild(rankNode);tableRowNode.appendChild(priceTableDataNode);tableRowNode.appendChild(percentNode);return tableRowNode}function thirdRowNode(data,colors,localeAtt){var tableRowNode=document.createElement("div");var tdFiller=document.createElement("div");var btcPrice=createBtcPriceNode(data.pb,localeAtt);var percentNode=createPercentNode(data.p24b,null,colors);tableRowNode.style.cssText="\n    display: flex;\n  ";tdFiller.style.cssText="\n    width: 40px;\n    margin-right: 20px;\n  ";tableRowNode.appendChild(tdFiller);tableRowNode.appendChild(btcPrice);tableRowNode.appendChild(percentNode);return tableRowNode}function createCredits(textColor,smallWidget,isRow){var credits=document.createElement("div");var anchor=document.createElement("a");anchor.href="http://coinstats.app";anchor.target="_blank";anchor.style.cssText="\n    font-size: 12px;\n    font-weight: 300;\n    text-decoration: none;\n    color: "+textColor+";\n    vertical-align: unset; \n  ";var styles="vertical-align: unset;";if(smallWidget){if(!isRow){styles+="padding-top: 10px;"}styles+="text-align: center;";anchor.innerHTML='Powered by Coin<b style="vertical-align: unset;">Stats</b>'}else{anchor.innerHTML='Powered by <span style="letter-spacing: 0.25px;font-size: 14px; vertical-align: unset;">Coin<b style="vertical-align: unset;">Stats</b></span>';styles+="padding-left: 34px; padding-top: 10px;"}credits.style.cssText=styles;credits.appendChild(anchor);return credits}function createRankNode(rank,colors){var rankNode=document.createElement("div");var rankBlockNode=document.createElement("span");rankBlockNode.innerHTML="#"+rank;rankBlockNode.style.cssText="\n    border-radius: 4px;\n\t\tbackground-color: "+colors.rankBackColor+";\n    font-size: 12px;\n    letter-spacing: 1px;\n\t\tfont-weight: bold;\n\t\ttext-align: center;\n    padding: 1px 4px;\n    color: "+colors.rankColor+";\n  ";rankNode.style.cssText="\n    display: flex;\n    flex-shrink: 0;\n    width: 40px;\n    justify-content: center;\n    margin-right: 20px;\n  ";rankNode.appendChild(rankBlockNode);return rankNode}function createBtcPriceNode(price,localeAtt){var tableData=document.createElement("div");var locale=localeAtt||"en";if(!localeAtt&&navigator){locale=navigator.language}var formatedBtc=new Intl.NumberFormat(locale,{minimumFractionDigits:8,maximumFractionDigits:8}).format(price);var textNode=document.createTextNode("â‚¿"+formatedBtc);tableData.appendChild(textNode);tableData.style.cssText="\n    font-size: 20px;\n    font-weight: 300;\n  ";return tableData}function createArrowSvg(color,rotate){var svgNode=document.createElement("div");svgNode.innerHTML='\n      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" style="display: initial; max-width: initial;">\n        <path fill="'+color+'" fill-rule="evenodd" d="M8.894 5.789l2.382 4.764A1 1 0 0 1 10.382 12H5.618a1 1 0 0 1-.894-1.447l2.382-4.764a1 1 0 0 1 1.788 0z"/>\n      </svg>\n    ';if(rotate){svgNode.style.transform="rotate(0.5turn)"}return svgNode}function createNameNode(name,symbol){var tableDataNode=document.createElement("div");var nameNode=document.createElement("span");nameNode.innerHTML=name+" ("+symbol+")";tableDataNode.style.cssText="\n      font-size: 15px;\n      font-weight: bold;\n      opacity: 0.8;\n      display: flex;\n      align-items: center;\n    ";tableDataNode.appendChild(nameNode);return tableDataNode}function formatPrice(price,localeAtt,currency){var maximumFractionDigits=6;var locale=localeAtt||"en";if(price>1){maximumFractionDigits=2}if(!localeAtt&&navigator){locale=navigator.language}var priceCalculation=price*currencies[currency].rate;if(currency==="BTC"||currency==="ETH"){priceCalculation=price/currencies[currency].rate}var formattedPrice=new Intl.NumberFormat(locale,{maximumFractionDigits:maximumFractionDigits}).format(priceCalculation);return currencies[currency].symbol+formattedPrice}function createPercentNode(percent,marginTop,colors){var percentTableDataNode=document.createElement("div");var percentNode=document.createElement("span");var svgBlock=document.createElement("div");var percentBlock=document.createElement("div");var percentContainer=document.createElement("div");svgBlock.style.cssText="\n    display: flex;\n    align-items: flex-end;\n    margin-bottom: 8%;\n  ";var status=percent<0?"statusDown":"statusUp";var svgNode=createArrowSvg(colors[status],status==="statusDown");svgBlock.appendChild(svgNode);percentBlock.appendChild(percentNode);percentContainer.appendChild(svgBlock);percentContainer.appendChild(percentBlock);percentTableDataNode.appendChild(percentContainer);percentNode.style.cssText="\n\t\tfont-size: 20px;\n\t\tfont-weight: 300;\n\t\tcolor: "+colors[status]+";\n  ";percentContainer.style.cssText="\n    display: flex;\n    margin-left: 6px;\n    "+(marginTop?"margin-top: 11%;":"")+"\n  ";svgBlock.style.marginTop="3%";percentNode.innerHTML=Math.abs(percent).toFixed(2)+"%";return percentTableDataNode}function iconMaker(icon){if(icon&&icon.toLowerCase().indexOf("http")>=0){return icon}return"https://api.coin-stats.com/api/files/812fde17aea65fbb9f1fd8a478547bde/"+icon}function createLogoNode(src){var tableDataNode=document.createElement("div");var logoNode=document.createElement("img");logoNode.setAttribute("src",iconMaker(src));logoNode.style.cssText="\n      height: 40px;\n      width: 40px;\n    ";tableDataNode.style.cssText="\n      display: flex;\n      margin-right: 20px;\n    ";tableDataNode.appendChild(logoNode);return tableDataNode}function CoinPriceSmall(){this.init=init;function init(placeHolder){var coinId=placeHolder.getAttribute("coin-id");getData(coinId,"small",function(data){var localeAtt=placeHolder.getAttribute("locale");var background=placeHolder.getAttribute("background");var text=placeHolder.getAttribute("text-color");var borderColor=placeHolder.getAttribute("border-color");var currency=placeHolder.getAttribute("currency");var width=placeHolder.getAttribute("width");var height=placeHolder.getAttribute("height");var disableCredits=placeHolder.getAttribute("disable-credits");var font=placeHolder.getAttribute("font")||"Roboto, Arial, Helvetica";var colors={background:background,text:text};var tempContainer=document.createElement("div");var widgetBlock=document.createElement("div");var widgetContainer=document.createElement("div");width=Number(width);height=Number(height);var direction=height&&height<120?"row":"column";var isRow=direction==="row";widgetBlock.style.cssText="\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        flex-direction: "+direction+";\n        background-color: "+colors.background+";\n        border-radius: 29px;\n        border: solid 1px "+borderColor+";\n        cursor: pointer;\n        height: "+(height?height+"px":"160px")+";\n        ";widgetContainer.style.cssText="\n        font-family: "+font+", sans-serif;\n        color: "+colors.text+";\n        max-width: "+(width>154?width+"px":"154px")+";\n        ";widgetBlock.appendChild(createLogoNode(data.ic,isRow));widgetBlock.appendChild(createPriceNode(data.pu,colors,localeAtt,currency,isRow));widgetBlock.setAttribute("onclick","window.open('https://coinstats.app/en/coins/"+coinId+"');");widgetContainer.appendChild(widgetBlock);if(!disableCredits){widgetContainer.appendChild(createCredits(colors.text,true,isRow))}tempContainer.appendChild(widgetContainer);placeHolder.innerHTML=tempContainer.innerHTML;resetStyles(placeHolder)})}function createPriceNode(price,colors,localeAtt,currency,isRow){var priceNode=document.createElement("div");var priceTextNode=document.createTextNode(formatPrice(price,localeAtt,currency));priceNode.appendChild(priceTextNode);priceNode.style.cssText="\n      font-size: "+(isRow?"15px":"34px")+";\n      font-weight: 300;\n      color: "+colors.text+";\n    ";return priceNode}function createLogoNode(name,isRow){var logoNode=document.createElement("img");logoNode.setAttribute("src",iconMaker(name));logoNode.style.cssText="\n      height: 40px;\n      width: 40px;\n      margin-"+(isRow?"right":"bottom")+": 10px;\n    ";return logoNode}}function resetStyles(placeHolder){placeHolder.insertAdjacentHTML("beforeend","<style>\n      coin-stats-ticker-widget * {\n        word-break: initial;\n        word-wrap: initial;\n        box-sizing: border-box;\n      }\n    </style>")}function init(node){if(node.getAttribute("coin-id")===""||!node.getAttribute("coin-id")){return}if(node.getAttribute("type")==="small"){return(new CoinPriceSmall).init(node)}createWidget(node)}function initAll(){var allPlaceHolders=document.querySelectorAll("coin-stats-ticker-widget");allPlaceHolders.forEach(function(node){init(node)})}function observeMutations(){var nodes=document.querySelectorAll("coin-stats-ticker-widget");var observer=new MutationObserver(callback);nodes.forEach(function(node){var disable=node.getAttribute("disable-mutation-observer");if(!disable){observer.observe(node,config)}});function callback(MutationRecord){init(MutationRecord[0].target)}}function ready(callbackFunc){if(document.readyState!=="loading"){callbackFunc()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",callbackFunc)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){callbackFunc()}})}}ready(function(){getCurrencies(function(res){currencies=res;initAll();observeMutations()})})})();