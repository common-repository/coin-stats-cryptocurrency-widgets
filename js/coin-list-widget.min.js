"use strict";(function(){var currencies={};var config={attributes:true};function getData(coinIds,topCoin,callback){if(coinIds){return fetch("https://api.coin-stats.com/v2/coins/prices",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({average:coinIds})}).then(function(res){return res.json()}).then(function(res){callback(res.prices.average.sort(function(a,b){return a.r-b.r}))})}else{return fetch("https://api.coin-stats.com/v2/coins?skip=0&limit="+topCoin).then(function(res){return res.json()}).then(function(res){return callback(res.coins)})}}function getCurrencies(callback){return fetch("https://api.coin-stats.com/v3/currencies").then(function(resFiats){return resFiats.json()}).then(function(resFiats){callback(resFiats)})}function createWidget(placeHolder){var coinIds=placeHolder.getAttribute("coin-ids");var topCoin=placeHolder.getAttribute("top-coin");if(coinIds&&!topCoin){coinIds=coinIds.split(",")}getData(coinIds,topCoin,function(data){var localAtt=placeHolder.getAttribute("locale");var width=placeHolder.getAttribute("width");var statusUpColor=placeHolder.getAttribute("status-up-color");var statusDownColor=placeHolder.getAttribute("status-down-color");var textColor=placeHolder.getAttribute("text-color");var backgroundColor=placeHolder.getAttribute("bg-color");var borderColor=placeHolder.getAttribute("border-color");var currency=placeHolder.getAttribute("currency").toUpperCase();var disableCredits=placeHolder.getAttribute("disable-credits");var font=placeHolder.getAttribute("font")||"Roboto, Arial, Helvetica";var colors={statusUp:statusUpColor,statusDown:statusDownColor,text:textColor,background:backgroundColor,border:borderColor};var size="large";if(Number(width)<240){size="small";width=240}if(Number(width)<362){size="small"}if(Number(width)>=362){size="medium"}if(Number(width)>=486){size="large"}var widgetContainer=document.createElement("div");var widgetTable=createTable(data,colors,size,localAtt,currency);widgetContainer.style.cssText="\n      max-width: "+width+"px;\n      font-family: "+font+", sans-serif;\n      color: "+colors.text+";\n    ";widgetContainer.appendChild(widgetTable);if(!disableCredits){widgetContainer.appendChild(createCredits(colors.text))}var container=document.createElement("div");container.appendChild(widgetContainer);placeHolder.innerHTML=container.innerHTML;resetStyles(placeHolder)})}function resetStyles(placeHolder){placeHolder.insertAdjacentHTML("beforeend","<style>\n      coin-stats-list-widget * {\n        word-break: initial;\n        word-wrap: initial;\n        box-sizing: border-box;\n      }\n    </style>")}function createCredits(textColor){var credits=document.createElement("div");var anchor=document.createElement("a");anchor.href="http://coinstats.app";anchor.target="_blank";anchor.innerHTML='Powered by <span style="letter-spacing: 0.25px;font-size: 14px; vertical-align: unset;">Coin<b style="vertical-align: unset;">Stats</b></span>';anchor.style.cssText="\n      font-size: 12px;\n      font-weight: 300;\n      text-decoration: none;\n      color: "+textColor+";\n      vertical-align: unset;\n    ";credits.style.cssText="\n      padding-top: 10px;\n      padding-left: 34px;\n      vertical-align: unset;\n    ";credits.appendChild(anchor);return credits}function createTable(data,colors,size,localAtt,currency){var table=document.createElement("table");table.style.cssText="\n    width: 100%;\n    overflow: hidden;\n    border-radius: 20px;\n    border-collapse: separate;\n    border-spacing: 0;\n    border: none;\n  ";var contentLength=data.length;data.forEach(function(el,i){var isFirstEl=i===0;var isLastEl=contentLength-1===i;var tableRow=createTableRow(el,colors,size,localAtt,currency,isFirstEl,isLastEl);table.appendChild(tableRow)});return table}function createTableRow(data,colors,size,localAtt,currency,isFirstEl,isLastEl){var tableRow=document.createElement("tr");var rankTableData=document.createElement("td");var logoTableData=createLogoNode(data.ic,colors,isLastEl);var name=createName(data.n,data.s,colors,size,isLastEl);var percent=createPercentNode(data.p24,colors,size,isFirstEl,isLastEl);tableRow.style.cssText="\n    height: 51px;\n    cursor: pointer;\n  ";rankTableData.innerHTML=data.r;var rankTableDataStyles="\n    font-size: 16px;\n    font-weight: 300;\n    padding-left: 28px;\n    padding-right:4px;\n    vertical-align: middle;\n    background-color: "+colors.background+";\n    border: none;\n    border-top: solid 1px "+colors.border+";\n    border-left: solid 1px "+colors.border+";\n    color: "+colors.text+";\n  ";if(isFirstEl){rankTableDataStyles+="border-top-left-radius: 29px;"}if(isLastEl){rankTableDataStyles+="\n      border-bottom-left-radius: 29px; \n      border-bottom: solid 1px "+colors.border+";"}rankTableData.style.cssText=rankTableDataStyles;tableRow.setAttribute("onclick","window.open('https://coinstats.app/en/coins/"+data.i+"');");tableRow.appendChild(rankTableData);tableRow.appendChild(logoTableData);tableRow.appendChild(name);tableRow.appendChild(percent);if(size==="large"){var price=createPrice(data.pu,colors,localAtt,currency,isFirstEl,isLastEl);tableRow.appendChild(price)}return tableRow}function createPercentNode(percent,colors,size,isFirstEl,isLastEl){var tableData=document.createElement("td");var percentNodeBlock=document.createElement("div");var status=percent<0?"statusDown":"statusUp";var tableDataStyles="\n      color: "+colors[status]+";\n      font-size: 16px;\n      font-weight: 300;\n      text-align: right;\n      vertical-align: middle;\n      "+(size!=="large"?"padding-right: 28px;":"")+"\n      border: none;\n      background-color: "+colors.background+";\n      border-top: solid 1px "+colors.border+";\n    ";if(isLastEl){tableDataStyles+="border-bottom: solid 1px "+colors.border+";"}if(size!=="large"){tableDataStyles+="border-right: solid 1px "+colors.border+";";if(isLastEl){tableDataStyles+="border-bottom-right-radius: 29px;"}if(isFirstEl){tableDataStyles+="border-top-right-radius: 29px;"}}tableData.style.cssText=tableDataStyles;percentNodeBlock.style.cssText="\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ";percentNodeBlock.insertAdjacentHTML("afterbegin",createArrowSvg(colors[status],status==="statusDown"));percentNodeBlock.insertAdjacentHTML("beforeend","<span>"+Math.abs(percent).toFixed(2)+"%</span>");tableData.appendChild(percentNodeBlock);return tableData}function createArrowSvg(color,rotate){return'\n    <svg style="display: unset;'+(rotate?" transform: rotate(0.5turn);":"")+'displa" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16">\n      <path fill="'+color+'" fill-rule="evenodd" d="M8.894 5.789l2.382 4.764A1 1 0 0 1 10.382 12H5.618a1 1 0 0 1-.894-1.447l2.382-4.764a1 1 0 0 1 1.788 0z"/>\n    </svg>\n  '}function createName(name,symbol,colors,size,isLastEl){var tableData=document.createElement("td");var nameNode=document.createElement("span");if(size==="small"){nameNode.innerHTML=symbol}else{nameNode.innerHTML=name+" ("+symbol+")"}nameNode.style.cssText="\n    font-size: 16px;\n    font-weight: 300;\n    padding-left:4px;\n    color: "+colors.text+";\n  ";var tableDataStyles="\n      vertical-align: middle;\n      border: none;\n      background-color: "+colors.background+";\n      border-top: solid 1px "+colors.border+";\n    ";if(isLastEl){tableDataStyles+="border-bottom: solid 1px "+colors.border+";"}tableData.style.cssText=tableDataStyles;tableData.appendChild(nameNode);return tableData}function createPrice(price,colors,localAtt,currency,isFirstEl,isLastEl){var tableData=document.createElement("td");var maximumFractionDigits=6;var locale=localAtt||"en";if(price>1){maximumFractionDigits=2}if(!localAtt&&navigator){locale=navigator.language}var priceCalculation=price*currencies[currency].rate;if(currency==="BTC"||currency==="ETH"){priceCalculation=price/currencies[currency].rate}var formattedPrice=new Intl.NumberFormat(locale,{maximumFractionDigits:maximumFractionDigits}).format(priceCalculation);tableData.innerHTML=currencies[currency].symbol+formattedPrice;var tableDataStyles="\n      font-size: 16px;\n      font-weight: 300;\n      text-align: right;\n      vertical-align: middle;\n      padding-right: 28px;\n      background-color: "+colors.background+";\n      border: none;\n      border-top: solid 1px "+colors.border+";\n      border-right: solid 1px "+colors.border+";\n      color: "+colors.text+";\n    ";if(isLastEl){tableDataStyles+="border-bottom-right-radius: 29px; border-bottom: solid 1px "+colors.border+"; "}if(isFirstEl){tableDataStyles+="border-top-right-radius: 29px;"}tableData.style.cssText=tableDataStyles;return tableData}function iconMaker(icon){if(icon&&icon.toLowerCase().indexOf("http")>=0){return icon}return"https://api.coin-stats.com/api/files/812fde17aea65fbb9f1fd8a478547bde/"+icon}function createLogoNode(src,colors,isLastEl){var tableData=document.createElement("td");var logoNode=document.createElement("img");logoNode.setAttribute("src",iconMaker(src));logoNode.style.cssText="\n    height: 23px;\n    width: 23px;\n    max-width: none;\n  ";var tableDataStyles="\n      vertical-align: middle;\n      background-color: "+colors.background+";\n      border: none;\n      border-top: solid 1px "+colors.border+";\n    ";if(isLastEl){tableDataStyles+="border-bottom: solid 1px "+colors.border+";"}tableData.style.cssText=tableDataStyles;tableData.appendChild(logoNode);return tableData}function ready(callbackFunc){if(document.readyState!=="loading"){callbackFunc()}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",callbackFunc)}else{document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){callbackFunc()}})}}function initAll(){var allPlaceHolders=document.querySelectorAll("coin-stats-list-widget");allPlaceHolders.forEach(function(node){createWidget(node)})}function observeMutations(){var nodes=document.querySelectorAll("coin-stats-list-widget");var observer=new MutationObserver(callback);nodes.forEach(function(node){var disable=node.getAttribute("disable-mutation-observer");if(!disable){observer.observe(node,config)}});function callback(MutationRecord){createWidget(MutationRecord[0].target)}}ready(function(){getCurrencies(function(res){currencies=res;initAll();observeMutations()})})})();